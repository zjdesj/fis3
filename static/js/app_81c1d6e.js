function showList(e,t){e=e.trim(),View.fetch("http://npmsearch.com/query?fields=name,keywords,description,rating,author,version",{q:(e?e+" and ":"")+"keywords:fis",from:t,size:2e3},function(e){e=JSON.parse(e),$("#search").attr("placeholder","检索到插件 "+e.total+" 个"),View.render("#plugin-list-body","#_tmpl_id_0",{lists:e.results.filter(function(e){return-1!==e.name.indexOf("fis-config")?!1:!0})},!!t)},function(e){throw e})}var F=function(){var e={};e.invert=function(e){for(var t={},n=Object.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t};var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=(e.invert(t),function(e){var t=function(t){return e[t]},n="(?:"+Object.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}});e.escape=n(t);var r=/(.)^/,i={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\u2028|\u2029/g,o=function(e){return"\\"+i[e]};return e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},e.template=function(t){var n=e.templateSettings,i=RegExp([(n.escape||r).source,(n.interpolate||r).source,(n.evaluate||r).source].join("|")+"|$","g"),u=0,c="__p+='";t.replace(i,function(e,n,r,i,l){return c+=t.slice(u,l).replace(a,o),u=l+e.length,n?c+="'+\n((__t=("+n+"))==null?'':F.escape(__t))+\n'":r?c+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(c+="';\n"+i+"\n__p+='"),e}),c+="';\n",n.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{var l=new Function(n.variable||"obj","F",c)}catch(s){throw s.source=c,s}var p=function(t){return l.call(this,t,e)},f=n.variable||"obj";return p.source="function("+f+"){\n"+c+"}",p},e}(),View=function(){function e(e,t,n,r){var i=$(t).html(),a=F.template(i)(n||{});r?$(e).append(a):$(e).html(a)}function t(e,t,n,r){$.ajax(e,{type:"GET",data:t}).done(n).fail(r)}return{render:e,fetch:t}}(),step=0,DEFAULT="",timer;$("#search").on("keyup",function(){var e=$("#search").val();clearTimeout(timer),timer=setTimeout(function(){Array.prototype.slice.call($(".plugin-name")).forEach(function(t){var n=$(t).parents("li");-1!==t.innerHTML.indexOf(e)?n.show():n.hide()})},100)}),$("#search").val(DEFAULT),showList(DEFAULT,0);